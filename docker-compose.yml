pacman:
  build: pacman/
  ports:
    - "80:80"
  links:
    - db
    - irods
  volumes:
    - ../handsontable:/var/www/html/sites/all/modules/handsontable
    - ../rit-pacman:/var/www/html/sites/all/modules/pacman
    - ../rit_forms:/var/www/html/sites/all/modules/rit_forms
irods:
  build: irods/
  ports:
    - "1247:1247"
    - "1248:1248"
  links:
    - irods-db
  environment:
    RODS_PASSWORD: irods
    PGPASSWORD: foobar
    INGEST_MOUNT: //fhml-srv002.unimaas.nl/ingest
    INGEST_USER: p.vanschayck
    LDAP_USER: M4i-nano-wiki
  volumes:
    - ./irods.secrets.cfg:/etc/secrets:ro
    - ../irods-ruleset:/rules
    - ../irods-helper-cmd:/helpers
  cap_add:
    - SYS_ADMIN
#  security_opt:
#    - apparmor:unconfined
db:
  image: mysql:5.6
  environment:
    MYSQL_DATABASE: pacman
    MYSQL_ROOT_PASSWORD: foobar
irods-db:
  image: postgres:9.4
  environment:
    POSTGRES_PASSWORD: foobar